= Exception handling

== Problem

=== Problem

[.fragment]
[source,java]
----
int[] numbers = new int[3];
numbers[4] = 45;
System.out.println(numbers[4]);
----

== Throwable

=== Hierarchy

image::/assets/img/java/basic/hierarchy-exceptions.png[Hierarchy for Exceptions]

=== `Throwable`

[.step]
* `Error`
* `Exception`

=== `Error`

[.step]
* `StackOverflowError`
* `OutOfMemoryError`
* `UnknownError`

=== `Exception`

[.step]
* `RuntimeException` (unchecked exceptions)
* Another Exception (checked exceptions)

=== `RuntimeException`

[.step]
* `ArithmeticException`
* `IndexOutOfBoundException`
* `IllegalArgumentException`
* `NumberFormatException`
* `NullPointerException`

== Exception handling

=== Exception handling

[.fragment]
[source,java]
----
int[] numbers = new int[3];
numbers[4] = 45;
System.out.println(numbers[4]);
----

=== `try`...`catch`

[.fragment]
[source,java]
----
try {
    int[] numbers = new int[3];
    numbers[4] = 45;
    System.out.println(numbers[4]);
} catch (Exception ex) {
    ex.printStackTrace();
}
System.out.println("Программа завершена");
----

=== `try`...`catch`...`finally`

[.fragment]
[source,java]
----
try {
    int[] numbers = new int[3];
    numbers[4] = 45;
    System.out.println(numbers[4]);
} catch (Exception ex) {
    ex.printStackTrace();
} finally {
    System.out.println("Блок finally");
}
System.out.println("Программа завершена");
----

=== Multiexceptions `catch`

[.fragment]
[source,java]
----
int[] numbers = new int[3];
try {
    numbers[6] = 45;
    numbers[6] = Integer.parseInt("gfd");
} catch (ArrayIndexOutOfBoundsException ex) {
    System.out.println("Выход за пределы массива");
} catch (NumberFormatException ex) {
    System.out.println("Ошибка преобразования из строки в число");
}
----

=== Multiexceptions `catch`

[.fragment]
[source,java]
----
int[] numbers = new int[3];
try {
    numbers[6] = 45;
    numbers[6] = Integer.parseInt("gfd");
} catch (ArrayIndexOutOfBoundsException | NumberFormatException ex) {
    System.out.println("Exception");
}
----

=== Operator `throw`

[.fragment]
[source,java]
----
package firstapp;

import java.util.Scanner;
public class FirstApp {
    public static void main(String[] args) {
        try {
            Scanner in = new Scanner(System.in);
            int x = in.nextInt();
            if (x >= 30) {
                throw new Exception("Число х должно быть меньше 30");
            }
        } catch (Exception ex) {
            System.out.println(ex.getMessage());
        }
        System.out.println("Программа завершена");
    } 
}
----

=== Operator `throws`

[.fragment]
[source,java]
----
public static int getFactorial(int num) throws Exception {
    if (num < 1) {
        throw new Exception("The number is less than 1");
    }
    int result = 1;
    for (int i = 1; i <= num; i++) {
        result *= i;
    }
    return result;
}

public static void main(String[] args) {
    try {
        int result = getFactorial(-6); 
        System.out.println(result);
    } catch (Exception ex) {
        System.out.println(ex.getMessage());
    }
}
----

=== Operator `throws`

[.fragment]
[source,java]
----
public static int getFactorial(int num) {
    int result = 1;
    try {
        if (num < 1) {
            throw new Exception("The number is less than 1");
        }
        for (int i = 1; i <= num; i++) {
            result *= i;
        }
    } catch (Exception ex) {
        System.out.println(ex.getMessage());
        result = num;
    }
    return result;
}
----

== Custom Exception

=== Custom Exception

[.fragment]
[source,java]
----
class FactorialException extends Exception {
    private int number;

    public int getNumber() {
        return number;
    }

    public FactorialException(String message, int num) {
        super(message);
        number = num;
    }
}
----

=== Custom Exception

[.fragment]
[source,java]
----
class Factorial {
    public static int getFactorial(int num) throws FactorialException {
        int result = 1;
        if (num < 1) {
            throw new FactorialException("The number is less than 1", num);
        }
        for (int i = 1; i <= num; i++) {
            result *= i;
        }
        return result;
    }
}
----
